---
title: 'Watch All Tasks V3 (Manual Trigger)'
description: 'This workflow automates the process of fetching task details from ClickUp, enriching them with account and employee information from Airtable, and updating records in Airtable. It handles various scenarios including archiving, specific tags, and creating subfolders. The workflow is triggered manually.'
api: "POST /enrich-record-manual"
---

## Workflow Details

- **Workflow ID**: `TLHsRBUWw3klQKo3`
- **Status**: Active
- **Created**: November 26, 2024
- **Last Updated**: June 10, 2025

## Webhook Trigger

The workflow is initiated by a manual trigger.

```
POST {{.n8n_host}}/webhook/enrich-record-manual
```

## Workflow Process

The workflow is designed to process tasks, enrich them with data, and update Airtable records. It also includes logic for handling specific tags and conditions.

### 1. Manual Trigger
- **Path**: `enrich-record-manual`
- **Method**: POST
- **Purpose**: Initiates the workflow manually to enrich task records.

### 2. Format1
- **Purpose**: Extracts and formats key data points from the incoming webhook payload.
- **Assignments**:
  - `recId`: Extracts the record ID from the webhook body.
  - `taskId`: Extracts the task ID from the webhook body.
  - `time_estimate`: Extracts the time estimate from the webhook body.

### 3. Filter
- **Purpose**: Filters the incoming data to ensure that both `recId` and `taskId` from the query parameters exist, indicating a valid trigger for record enrichment.

### 4. Format2
- **Purpose**: Extracts and formats `recId` and `taskId` from the query parameters for further processing.

### 5. Format
- **Purpose**: Formats the extracted `recId`, `taskId`, and `time_estimate` for use in subsequent operations. The `time_estimate` is set to null if it's negative.

### 6. Airtable
- **Purpose**: Fetches the record from Airtable using the `recId` obtained from the trigger.

### 7. Get CU Task
- **Purpose**: Retrieves detailed information about a specific task from ClickUp using the `taskId`.

### 8. Merge1
- **Purpose**: Combines the results from the "Airtable" node and the "Get CU Task" node. It prioritizes data from the "Airtable" node if there are conflicts.

### 9. Execute Workflow
- **Purpose**: Executes a sub-workflow named "Search Assignees API" with inputs derived from the "Get CU Task" node.

### 10. No Operation, do nothing
- **Purpose**: This node serves as a placeholder and does nothing, likely for branching logic or debugging.

### 11. Merge1
- **Purpose**: Combines the results from the "Get CU Task" node and the "Execute Workflow" node.

### 12. Check if Not Archived
- **Purpose**: Checks if the task is not archived. If it is archived, it proceeds to delete the Airtable record.

### 13. Stay w/ Branch 1
- **Purpose**: This merge node is used to combine data from different branches of the workflow.

### 14. If4
- **Purpose**: Checks if a specific Dropbox folder ID is present in the ClickUp task's custom fields.

### 15. Get DB Folder ID from ShareURL
- **Purpose**: Retrieves metadata from Dropbox using a shared link, specifically to get a folder ID. It handles potential errors if the Dropbox operation fails.

### 16. Dropbox2
- **Purpose**: Searches for a folder in Dropbox based on the task name, after cleaning it from emojis and trimming whitespace.

### 17. Stay w/ Branch 1
- **Purpose**: This merge node is used to combine data from different branches of the workflow.

### 18. If3
- **Purpose**: Determines whether to use the folder ID from Dropbox or the ID obtained from the "Get DB Folder ID from ShareURL" node. It prioritizes the Dropbox ID if the other operation fails.

### 19. Edit Fields2
- **Purpose**: Extracts and formats the "Go Live Date" from the raw text content of the ClickUp task.

### 20. If1
- **Purpose**: Checks if the extracted "Go Live Date" has a length greater than 2 and if a Dropbox folder ID is available.

### 21. Postgres3
- **Purpose**: Inserts or updates the "go_live_date" for the task in the "go_live_dates" PostgreSQL table.

### 22. Update Airtable Record
- **Purpose**: Updates an existing record in Airtable with various details from the ClickUp task, including tags, client information, task ID, URLs, dates, time tracked, N8N execution ID, and Dropbox Folder ID. It also attempts to map the Responsible Department based on various conditions.

### 23. If
- **Purpose**: Checks if the "Go Live Date" field is not empty.

### 24. Set Custom Fields
- **Purpose**: Sets custom fields for the ClickUp task, specifically the "Go Live Date" and the task ID.

### 25. Merge3
- **Purpose**: Combines data from multiple branches, including the results of setting custom fields and re-uploading ClickUp task data.

### 26. Check for comms_plan Tag
- **Purpose**: Filters tasks to identify those with the "comms_plan" tag.

### 27. Remove "Download Video Reminder" projects1
- **Purpose**: Filters out tasks that are "Download Video Reminder" projects and ensures a specific custom field exists.

### 28. Get Accounts
- **Purpose**: Searches for account information in Airtable based on the ClickUp Folder ID.

### 29. Switch
- **Purpose**: Routes the workflow based on whether a "C-Squad Contact(s)" field exists in the task.

### 30. Get Employee
- **Purpose**: Retrieves employee information from Airtable based on the "C-Squad - Preferred (T)" field from the "Get Accounts" node.

### 31. Tag User Message
- **Purpose**: Sends a Slack message to a specific user, tagging them with their Slack User ID, if a "comms_plan" tag is found and a specific C-Squad contact is identified.

### 32. Generic Message
- **Purpose**: Sends a generic Slack message to the "PM channel" if the "comms_plan" tag is found but the C-Squad contact is not specified, or if the task is not related to the video squad.

### 33. If Video Squad
- **Purpose**: Checks if the task belongs to the "video" squad based on tags or custom field values.

### 34. If2
- **Purpose**: Checks if a valid Dropbox Folder ID or equivalent is available.

### 35. Edit Fields
- **Purpose**: Prepares data for creating video folders, setting the event type and project name.

### 36. Dropbox
- **Purpose**: Lists folders in Dropbox based on a constructed path, which includes the ClickUp task's project name.

### 37. Get Key
- **Purpose**: Retrieves a decrypted secret key from a PostgreSQL vault.

### 38. Merge
- **Purpose**: Combines data from multiple branches, including Dropbox folder information and the retrieved key.

### 39. Wait2
- **Purpose**: Pauses the workflow execution for a specified duration.

### 40. Airtable2
- **Purpose**: Updates an Airtable record to mark "Video Template Folders" as true for a given task.

### 41. Postgres1
- **Purpose**: Upserts project folder information into the "project_folders" PostgreSQL table, including the Dropbox Folder ID, task ID, and path display.

### 42. Copy Template Folders
- **Purpose**: Invokes an AWS Lambda function to copy template folders, using parameters derived from the workflow's data.

### 43. Delete Airtable Record
- **Purpose**: Deletes a record from Airtable if the task is identified as archived.

### 44. Update Airtable Record w/o Go Live
- **Purpose**: Updates an Airtable record with details similar to "Update Airtable Record" but excludes the "Go Live Date" field. This is likely a fallback or alternative update mechanism.

---